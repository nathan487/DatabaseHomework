# 志愿者活动管理系统 - 需求清单

## 1. 用户注册
用户可以使用用户名和密码注册账户，注册时可选择身份为"普通用户"或"管理员"。系统需检查用户名唯一性，密码使用MD5加密存储。注册成功后用户可使用该账户登录系统。

## 2. 管理员新增活动
管理员可创建新活动。需填写活动标题、举办时间、地点、最大参加人数。系统需验证时间不早于当前时间，人数大于0。创建后活动状态为"活跃"，普通用户可以看到并申请。

## 3. 管理员修改活动
管理员可修改已创建的活动信息，包括标题、时间、地点、人数等。修改后的活动立即生效。

## 4. 管理员删除活动
管理员可删除活动。删除后用户看不到此活动，已有的申请记录保留（用于历史查询）。

## 5. 普通用户浏览活动
用户登录后可看到所有活跃的活动列表（已过期或被关闭的活动不显示）。列表显示活动标题、时间、地点、人数限制。用户可按部门或分类筛选活动。

## 6. 普通用户申请活动
用户点击活动的"申请"按钮即可申请参加。系统需检查：用户是否已申请过（不允许重复申请）、活动是否还有名额（已批准人数 < 最大人数）、活动是否还未过期。申请创建后状态为"待审核"，等待管理员审核。

## 7. 管理员查看活动申请人
管理员选择某个活动后可看到所有申请此活动的用户列表，包括申请人用户名、申请时间、当前审核状态（待审核/已批准/已拒绝）。

## 8. 管理员审核申请
管理员对申请人提交的申请进行审核，可选择"批准"或"拒绝"。批准时需检查活动是否还有名额。每次审核操作都会记录审核者ID、审核时间和审核结果。

## 9. 普通用户查看个人申请状态
用户进入"我的申请"可看到自己提交的所有申请及其审核状态。列表显示活动标题、活动时间、申请时间、审核结果（待审核/已批准/已拒绝）。按申请时间从新到旧排列。

## 10. 自动关闭过期活动
系统每分钟自动检查一次所有活动。当活动的举办时间已经过期（activity_time < 当前时间）时，系统自动将活动状态改为"已过期"。过期的活动用户无法再申请，但管理员仍可查看。此功能需在系统启动时启动定时任务。

## 11. 管理员查看统计仪表盘
管理员可访问统计仪表盘，查看系统的各类统计数据。仪表盘需展示：总活动数、活跃活动数、总用户数、总报名数、已批准报名数、待审批报名数、已拒绝报名数、已过期活动数。

## 12. 部门和分类统计
管理员可在统计仪表盘查看各部门和各分类的统计数据，包括：各部门的活动数、平均容量、创建者数量；各分类的活动数、总报名数、已批准人数。使用GROUP BY进行分组统计，使用聚合函数计算数据。

## 13. 用户活跃度排行
管理员可在统计仪表盘查看用户活跃度排行，显示TOP 10用户的报名数、已批准数、已拒绝数，并按已批准数从高到低排序。

## 14. 活动热度排行
管理员可在统计仪表盘查看活动热度排行，显示TOP 10活动的报名数、已批准数、填充率。填充率 = 已批准人数 / 活动最大人数。

## 15. 管理员创建统计
管理员可在统计仪表盘查看各管理员的创建统计，显示每个管理员创建的活动数、收到的总报名数、已批准的报名数。

## 16. 即将开始的活动
用户首页展示"即将开始的活动（3天内）"模块，列出未来3天内即将举办的活动，并显示距离现在的天数和小时数。使用日期函数计算活动距离现在的时间差，按倒计时从短到长排序，并根据倒计时天数着色（1天内红色、1-2天黄色、2天以上绿色）。

## 17. 热门活动列表
管理员统计仪表盘展示"热门活动"模块，只显示有已批准报名的活动。使用EXISTS子查询过滤活动，显示活动的报名统计（已批准、待审批、已拒绝）和填充率。

## 18. 活动详情展示
用户点击活动可查看完整的活动详情，包括活动标题、描述、时间、地点、人数限制、所属部门、活动分类、创建者信息。后端使用4表LEFT JOIN（Activity + Dept + ActivityCategory + User）一次查询获取所有信息。

## 19. 可申请的活动列表
用户首页展示"我可以申请的活动"模块，筛选出用户可以申请的活动。筛选条件：排除用户已申请过的活动，只显示还有空位（已批准人数 < 最大人数）的活动，排除与用户已申请活动时间冲突（2小时内）的活动。使用NOT IN集合操作和自连接排除冲突活动。列表显示活动标题、报名进度条、剩余席位数。

## 20. 活动搜索功能
用户可通过关键词搜索活动。搜索使用LIKE模糊匹配活动标题，显示符合条件的活动列表。

## 21. 全能志愿者统计
管理员统计仪表盘展示"全能志愿者"模块，显示参加了所有分类活动的用户（除法查询）。使用HAVING COUNT(DISTINCT category_id) = (SELECT COUNT(*) FROM ActivityCategory)过滤用户，显示用户已覆盖的分类数、已批准的参加次数，并标记为"全能志愿者"。

---


